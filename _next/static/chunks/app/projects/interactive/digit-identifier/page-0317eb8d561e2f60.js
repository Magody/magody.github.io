(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[108],{85817:()=>{},18590:()=>{},4530:()=>{},8108:()=>{},80551:()=>{},41234:()=>{},97124:(t,e,i)=>{Promise.resolve().then(i.bind(i,19128))},19128:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>g});var s=i(95155),o=i(12115),a=i(8891),n=i(13517),c=i.n(n),r=i(51120);class h extends r.g{setPosition(t,e){let i=this.canvas.offsetLeft,s=this.canvas.offsetTop;this.pos.x=t-i,this.pos.y=e-s}move(t,e){this.context.beginPath(),this.context.lineWidth=30,this.context.lineCap="round",this.context.strokeStyle="#111111",-1==this.pos.x&&-1==this.pos.y&&this.setPosition(t,e),this.context.moveTo(this.pos.x,this.pos.y),this.setPosition(t,e),this.context.lineTo(this.pos.x,this.pos.y),this.context.stroke(),this.context.closePath()}onResize(t){}init(){}getImageData(){return this.context.drawImage(this.canvas,0,0,28,28),this.context.getImageData(0,0,28,28)}clear(){this.context.clearRect(0,0,this.context.canvas.width,this.context.canvas.height)}constructor(t,e){super(t),this.pos={x:-1,y:-1},this.dom=e,this.color_edge="blue",this.init()}}var l=i(2818);let d="".concat(l.env.NEXT_PUBLIC_BASE_PATH||"","/images/projects/machine_learning/DigitsRecognition"),g=()=>{let[t,e]=(0,o.useState)("Loading the model..."),[i,n]=(0,o.useState)(null),[r,l]=(0,o.useState)(null),[g,u]=(0,o.useState)([]);(0,o.useEffect)(()=>{(async()=>{try{let t=await a.O0W("".concat(d,"/model.json"));l(t),a.jh6("cpu"),e("Model loaded and ready to predict!")}catch(t){console.error("Error loading model:",t),e("Error loading model")}})()},[]),(0,o.useEffect)(()=>{r&&n(new h(document.getElementById("draw"),document))},[r]);let m=()=>i&&r,p=t=>{let e=a.TaL.fromPixels(t,1).reshape([1,28,28,1]).cast("float32");return a.DZQ(()=>Array.from(r.predict(e).dataSync()).map(t=>Math.round(100*t)))};return(0,o.useEffect)(()=>{if(g.length>0){let t=g.indexOf(Math.max(...g));e("Your number is: ".concat(["ZERO","ONE","TWO","THREE","FOUR","FIVE","SIX","SEVEN","EIGHT","NINE"][t]))}},[g]),(0,s.jsxs)("div",{className:c().container,onMouseUp:()=>{if(!m())return;let t=i.getImageData();e("Processing image..."),u(p(t)),e("Prediction completed!"),i.pos.x=-1,i.pos.y=-1},children:[(0,s.jsx)("h1",{className:c().heading,children:"Digit Recognition with TensorFlow.js"}),(0,s.jsx)("p",{className:c().text,children:"Draw a number on the canvas below!"}),r&&(0,s.jsx)("div",{className:c().canvasWrapper,children:(0,s.jsx)("canvas",{id:"draw",className:c().canvas,width:"200",height:"200",onMouseMove:t=>{m()&&1===t.buttons&&i.move(t.pageX,t.pageY)},onTouchMove:t=>{if(!m())return;let e=t.touches[0];i.move(e.pageX,e.pageY)}})}),(0,s.jsx)("button",{className:c().button,onClick:()=>{m()&&(i.clear(),e("Canvas reset. Draw a new digit!"))},children:"Reset Canvas"}),(0,s.jsx)("div",{className:c().prediction,children:t}),(0,s.jsx)("iframe",{src:"https://player.vimeo.com/video/711431860?h=36f8472fb2&badge=0&autopause=0&player_id=0&app_id=58479",frameBorder:"0",allow:"autoplay; fullscreen; picture-in-picture",allowFullScreen:!0,className:c().frame,title:"MNIST Demo"})]})}},51120:(t,e,i)=>{"use strict";i.d(e,{g:()=>s});class s{aleatorio(t,e){return t+Math.floor(Math.random()*(e+.99))}dibujarCuadrado(t,e,i,s){this.context.fillStyle=s,this.context.fillRect(t,e,i,i)}dibujarLinea(t,e,i,s,o){this.context.beginPath(),this.context.strokeStyle=o,this.context.linewidth=10,this.context.moveTo(t,e),this.context.lineTo(i,s),this.context.stroke(),this.context.closePath()}async sleep(t){return new Promise(e=>setTimeout(e,t))}constructor(t){this.canvas=t,this.context=this.canvas.getContext("2d"),this.width=this.canvas.width,this.height=this.canvas.height}}},13517:t=>{t.exports={container:"DigitsRecognition_container__8gBnB",heading:"DigitsRecognition_heading__Qx9XN",text:"DigitsRecognition_text__yxw_8",canvasWrapper:"DigitsRecognition_canvasWrapper__AE80v",canvas:"DigitsRecognition_canvas__j5uBA",button:"DigitsRecognition_button__W6Dbc",prediction:"DigitsRecognition_prediction__bRC9r",frame:"DigitsRecognition_frame__Vo3mv",fullImage:"DigitsRecognition_fullImage__5S7Us"}}},t=>{var e=e=>t(t.s=e);t.O(0,[270,690,272,660,56,87,251,674,236,441,517,358],()=>e(97124)),_N_E=t.O()}]);